process PROD  = 
{
    service = MessageLogger
    {
	untracked vstring destinations = {"cout"}
	
	untracked vstring categories = { "CaloSim", "DDLParser", "EcalGeom", "FwkJob", "GeometryInfo", 
	    "HCalGeom", "HCalSim", "TrackerMapDDDtoID", "TrackerSimInfoNumbering" }
	
	untracked PSet cout = { 
	    untracked PSet CaloSim = { untracked int32 limit = -1 }
	    untracked PSet default = { untracked int32 limit = -1 }    # kill all messages in the log
	    untracked PSet DDLParser = { untracked int32 limit = -1 }
	    untracked PSet EcalGeom = { untracked int32 limit = -1 }
	    untracked PSet FwkJob  = { untracked int32 limit = -1 }  # except *all* of FwkJob's      
	    untracked PSet GeometryInfo = { untracked int32 limit = -1 } 
	    untracked PSet HCalGeom = { untracked int32 limit = -1 }
	    untracked PSet HcalSim = { untracked int32 limit = -1 }
	    untracked PSet TrackerMapDDDtoID = { untracked int32 limit = -1 } 
	    untracked PSet TrackerSimInfoNumbering = { untracked int32 limit = -1 }
	}
	
	untracked vstring fwkJobReports = {"FrameworkJobReport.xml"}
    }
    
    service = RandomNumberGeneratorService
    {
	untracked uint32 sourceSeed = 12345
	PSet moduleSeeds =
	{
	    untracked uint32 g4SimHits = 54321
            untracked uint32 VtxSmeared = 6789
            untracked uint32 mix = 123
	}
    }
    
    source = LaserAlignmentSource 
    {
	untracked int32 maxEvents = 1
	untracked uint32 firstRun = 1
    }
    
    
    #Geometry
    #include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
    # add the description of the Alignment Tubes
    replace XMLIdealGeometryESSource.geomXMLFiles += "Alignment/LaserAlignmentSimulation/data/AlignmentTubes.xml"
    
    
    #Magnetic Field
    #
    #include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
    
    #es_module = TrackerGeometricDetESModule {}
    #es_module = TrackerDigiGeometryESModule {}
    
    module o1 = PoolOutputModule 
    { 
	untracked string fileName = "LaserEvents.SIM-DIGI.root" 
	#untracked string logicalFileName = "LaserEvents.SIM-DIGI.root"
	#untracked string catalog = "PoolFileCatalog.xml"
	untracked int32  compressionLevel = 9
    }

    include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
    include "Configuration/StandardSequences/data/MixingNoPileUp.cff"

	include "SimG4Core/Configuration/data/SimG4Core.cff"
    replace g4SimHits.Physics.type = "SimG4Core/Physics/LaserOpticalPhysics"
    replace g4SimHits.Watchers = {
	{ string type = "LaserAlignmentSimulation"
	    untracked int32 DebugLevel = 0
	    untracked int32 MaterialPropertiesDebugLevel = 1
	    untracked double SiAbsorptionLengthScalingFactor = 1.0
	    untracked double EnergyLossScalingFactor = 1739.130435
	    untracked double PhotonEnergy = 1.15
	    untracked int32 NumberOfPhotonsInParticleGun = 10
	    untracked int32 NumberOfPhotonsInEachBeam = 100
	}
    }
    
	include "Configuration/StandardSequences/data/Digi.cff"
	
	sequence psim  = { VtxSmeared, g4SimHits }
	sequence pdigi = { mix,doAllDigi }
	sequence simulation = {psim,pdigi}
    
    path p1 = { simulation }
    endpath output = { o1 }
}
